// Generated by CoffeeScript 1.6.3
(function() {
  'use strict';
  var Habit, SingleResult, app, app_name, today,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  today = moment().startOf('day');

  SingleResult = (function() {
    function SingleResult(_arg) {
      this.day = _arg.day, this.dateTime = _arg.dateTime, this.ticked = _arg.ticked, this.streak = _arg.streak;
    }

    return SingleResult;

  })();

  Habit = (function() {
    function Habit(name, previousResults) {
      this.name = name;
      this.previousResults = previousResults;
      this.clicked = __bind(this.clicked, this);
      this.streak = this.previousResults[0].streak;
    }

    Habit.prototype.ticked = 0;

    Habit.prototype.previousStreak = function() {
      return this.previousResults[0].streak;
    };

    Habit.prototype.increaseStreak = function() {
      if (this.previousStreak() > 1) {
        return this.previousStreak() + 1;
      } else {
        return 1;
      }
    };

    Habit.prototype.sameStreak = function() {
      return this.previousStreak();
    };

    Habit.prototype.failedStreak = function() {
      if (this.previousStreak() < 0) {
        return this.previousStreak() - 1;
      } else {
        return -1;
      }
    };

    Habit.prototype.clicked = function() {
      this.ticked = (this.ticked + 1) % 3;
      return this.streak = (function() {
        switch (false) {
          case this.ticked !== 1:
            return this.increaseStreak();
          case this.ticked !== 2:
            return this.failedStreak();
          default:
            return this.sameStreak();
        }
      }).call(this);
    };

    return Habit;

  })();

  /* Controllers*/


  app_name = "myApp";

  app = angular.module("" + app_name + ".controllers", []);

  app.controller('myCtrl1', [
    '$scope', function($scope) {
      $scope.name = "view 1";
      $scope.say = function() {
        return window.alert.apply(window, arguments);
      };
      return $scope.test = 4;
    }
  ]);

  app.controller('myCtrl2', [
    '$scope', function($scope) {
      return $scope.test = 2;
    }
  ]);

  app.controller('CtrlUserBoard', [
    '$scope', function($scope) {
      $scope.name = "view 3";
      $scope.say = function() {
        return window.alert.apply(window, arguments);
      };
      $scope.test = 4;
      $scope.checkboxImages = ["images/unchecked_checkbox.png", "images/tick-green.png", "images/red-cross.png"];
      return $scope.habits = [
        new Habit('meditation', [
          new SingleResult({
            day: moment().subtract(1).startOf('day'),
            dateTime: moment().subtract(1),
            ticked: 1,
            streak: 5
          }), new SingleResult({
            day: moment().subtract(2).startOf('day'),
            dateTime: moment().subtract(2),
            ticked: 1,
            streak: 4
          })
        ])
      ];
    }
  ]);

}).call(this);
